<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pal Survey!</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="jumbotron">
        <h1 class="text-center"><span class="fa fa-fire"></span> Pals</h1>
        <hr />
        <h2 class="text-center">Take the survey to find a match!</h2>
        <br />
        <div class="text-center">
          <a href="/">
            <button class="btn btn-lg btn-default">
              <span class="fa fa-home"></span>
            </button>
          </a>
        </div>
      </div>
      <div class="row">
        <!--Row-->
        <div class="col-lg-12">
          <div class="card">
            <!-- About You Card -->
            <div class="card-header">
              About You
            </div>
            <div class="card-body">
              <div class="divider"></div>

              <div class="input-field col s6">
                <h5>Name (Required)</h5>
                <input
                  type="text"
                  class="validate"
                  placeholder="Your Name Here"
                  id="userName"
                />
              </div>
            </div>
          </div>
          <!-- ./About You Card -->

          <br />
          <br />

          <div class="card">
            <!-- Survey Questions Card -->
            <div class="card-header">
              Survey Questions (*All Questions Required)
            </div>
            <div class="card-body">
              <!-- Table Start -->
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Question</th>
                    <th scope="col">Answer</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    <td>I would like to be famous.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q1">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">2</th>
                    <td>
                      I feel that people that use online dating are looking for
                      a long-term relationship.
                    </td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q2">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">3</th>
                    <td>I like to drench my pancakes in syrup.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q3">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">4</th>
                    <td>I don't care if people perceive me as weird.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q4">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">5</th>
                    <td>
                      I prefer to stay in rather than go out on a Friday night.
                    </td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q5">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">6</th>
                    <td>I plan out all of my trips in detail.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q6">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">7</th>
                    <td>I easily get bored.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q7">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">8</th>
                    <td>I think people are inherently born good.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q8">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">9</th>
                    <td>
                      I would rather be rich and have everyone in the world hate
                      me.
                    </td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q9">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">10</th>
                    <td>
                      I would rather be held in high regard by my parents than
                      my friends.
                    </td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q10">
                          <option value="" disabled selected
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                </tbody>
                <!-- ./Table -->
              </table>

              <br />

              <!-- Survey Submit Button -->
              <div>
                <button
                  class="btn btn-primary"
                  type="submit"
                  name="action"
                  id="submitButton"
                >
                  Submit Responses
                </button>
              </div>

              <!--./Card Body-->
            </div>
            <!-- ./Survey Questions Card -->
          </div>
          <!--./Column-->
        </div>
        <!--./Row-->
      </div>

      <br />

      <div clas="card">
        <div class="card-body">
          <footer class="footer">
            <div class="container">
              <p>
                <a href="/api/survey">API Survey Link</a>
              </p>
            </div>
          </footer>
        </div>
      </div>

      <!--Matched Pal Modal-->
      <div id="palModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h3 class="modal-title">Your New Pal!</h1>
            </div>
            <div class="modal-body">
              <h2 id="yourPal"></h2>
              <img id="yourPalPhoto" src="#">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <!--./Container Div-->
    </div>
  </body>
</html>

<!-- -------- -->
<!-- END HTML -->
<!-- -------- -->

<script type="text/javascript">
  // Submit Button
  $("#submitButton").on("click", function(event) {
    event.preventDefault();
    // User Survey Answers
    var userInput = {
      name: $("#userName")
        .val()
        .trim(),
      scores: [
        $("#q1")
          .val(),
        $("#q2")
          .val(),
        $("#q3")
          .val(),
        $("#q4")
          .val(),
        $("#q5")
          .val(),
        $("#q6")
          .val(),
        $("#q7")
          .val(),
        $("#q8")
          .val(),
        $("#q9")
          .val(),
        $("#q10")
          .val()
      ]
    };

    console.log(userInput);

    // Ajax Call To Get Matched Pal
    $.post("/api/friends", userInput)
    .done(function(data) {
				$("#yourPal").text(data.matchedPalName);
				$("#yourPalPhoto").attr("src", data.matchedPalPhoto);
				$("#palModal").modal("open");
      });
      

    //--------------------

  });
</script>
