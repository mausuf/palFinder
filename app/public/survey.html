<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pal Survey!</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <!-- CSS -->
    <style>
      .box{
      background-color: #FFF9ED!important;
      border: #B3A894 3px solid!important;
      }
      .headerBlock, .card{
      color: #B3A894;
      background-color: #D4FFE8;
      }
    </style>
  </head>

  <body>
    <div class="container box">
      <div class="jumbotron headerBlock card">
        <h1 class="text-center"><span class="fa fa-fire"></span> Pals</h1>
        <hr />
        <h2 class="text-center">Take the survey to find a match!</h2>
        <br />
        <div class="text-center">
          <a href="/">
            <button class="btn btn-lg btn-default">
              <span class="fa fa-home"></span>
            </button>
          </a>
        </div>
      </div>
      <div class="row">
        <!--Row-->
        <div class="col-lg-12">
          <div class="card">
            <!-- About You Card -->
            <div class="card-header">
              About You
            </div>
            <div class="card-body">
              <div class="divider"></div>

              <div class="input-field col s6">
                <h5>Name (Required)</h5>
                <input
                  type="text"
                  class="validate"
                  placeholder="Your Name Here"
                  id="userName"
                />
              </div>
            </div>
          </div>
          <!-- ./About You Card -->

          <br />
          <br />

          <div class="card">
            <!-- Survey Questions Card -->
            <div class="card-header">
              Survey Questions (*All Questions Required)
            </div>
            <div class="card-body">
              <!-- Table Start -->
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Question</th>
                    <th scope="col">Answer</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    <td>I would like to be famous.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q1" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">2</th>
                    <td>
                      I feel that people that use online dating are looking for
                      a long-term relationship.
                    </td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q2" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">3</th>
                    <td>I like to drench my pancakes in syrup.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q3" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">4</th>
                    <td>I don't care if people perceive me as weird.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q4" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">5</th>
                    <td>
                      I prefer to stay in rather than go out on a Friday night.
                    </td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q5" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">6</th>
                    <td>I plan out all of my trips in detail.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q6" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">7</th>
                    <td>I easily get bored.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q7" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">8</th>
                    <td>I think people are inherently born good.</td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q8" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">9</th>
                    <td>
                      I would rather be rich and have everyone in the world hate
                      me.
                    </td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q9" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">10</th>
                    <td>
                      I would rather be held in high regard by my parents than
                      my friends.
                    </td>
                    <td>
                      <div class="input-field col s12">
                        <select id="q10" class="chosen">
                          <option value=""
                            >Choose your option</option
                          >
                          <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                </tbody>
                <!-- ./Table -->
              </table>

              <br />

              <!-- Survey Submit Button -->
              <div>
                <button
                  class="btn btn-primary"
                  type="submit"
                  name="action"
                  id="submitButton"
                >
                  Submit Responses
                </button>
                <button
                class="btn btn-secondary"
                type="button"
                name="action"
                id="refreshButton"
                onClick="window.location.href=window.location.href"
              >
                Take Survey Again!
              </button>
              </div>

              <!--./Card Body-->
            </div>
            <!-- ./Survey Questions Card -->
          </div>
          <!--./Column-->
        </div>
        <!--./Row-->
      </div>

      <br />

      <div clas="card">
        <div class="card-body">
          <footer class="footer">
            <div class="container">
              <p>
                <a href="/api/friends">API Pals Link!</a>
              </p>
            </div>
          </footer>
        </div>
      </div>

      <!--Matched Pal Modal-->
      <div id="palModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h3 class="modal-title">Your New Pal!</h1>
            </div>
            <div class="modal-body">
              <h2 id="yourPal"></h2>
              <img id="yourPalPhoto" src=""/>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <!--./Container Div-->
    </div>
  </body>
</html>

<!-- -------- -->
<!-- END HTML -->
<!-- -------- -->

<script type="text/javascript">

// Capture form inputs
$("#submitButton").on("click", function(event) {
  event.preventDefault();
  // Form validation
  function validateForm() {
    var isValid = true;
    $(".validate").each(function() {
      if ($(this).val() === "") {
        isValid = false;
      }
    });
    $(".chosen").each(function() {
      if ($(this).val() === "") {
        isValid = false;
      }
    });
    return isValid;
  }
  // If all required fields are filled
  if (validateForm()) {
    // Create an object for the user"s data
    var userData = {
      name: $("#userName").val(),
      score: [
        $("#q1").val(),
        $("#q2").val(),
        $("#q3").val(),
        $("#q4").val(),
        $("#q5").val(),
        $("#q6").val(),
        $("#q7").val(),
        $("#q8").val(),
        $("#q9").val(),
        $("#q10").val()
      ]
    };
    // AJAX post
    $.post("/api/friends", userData, function(data) {
      // Grab the result from the AJAX post so that the best match's name and photo are displayed.
      $("#yourPal").text(data.palName);
      $("#yourPalPhoto").attr("src", data.palImage);
      // Show the Pal with the best match
      $("#palModal").modal("toggle");
    });
  } else {
    alert("Please fill out all fields, thanks :)");
  }
});
</script>